<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf8">
  <title>CamanJS - Basic Usage</title>

  <link rel='stylesheet' type='text/css' href='/bundles/0e02b474f069a81249b96d82cb7559df.css' />


  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Raleway:400,200,700' rel='stylesheet' type='text/css'>

  <script type='text/javascript' src='/bundles/78be892198fbf1b7ab6d278956848c11.js'></script>


  <script src="/javascripts/guides.js"></script>
</head>
<body>
  <div
  id="HeaderContainer"
  
  class="Fixed"
  
>
  <div id="Header">
    <div class="Left">
      <h1>CamanJS</h1>
    </div>
    <div class="Right">
      <ul>
        <li >
          <a href="/">Home</a>
        </li>
        <li >
          <a href="/examples">Examples</a>
        </li>
        <li class="Active">
          <a href="/guides">Guides</a>
        </li>
        <li >
          <a href="/docs/caman.html">API Docs</a>
        </li>
      </ul>
    </div>
    <div class="Clear"></div>

    
    <ul id="GuideSections">
      <li class="Active"><a href="#BasicUsage">Basic Usage</a></li>
      <li><a href="#AdvancedUsage">Advanced Usage</a></li>
      <li><a href="#BuiltIn">Built-in Functionality</a></li>
      <li><a href="#Extending">Extending</a></li>
    </ul>
    <div class="Clear"></div>
    
  </div>
</div>

<div id="Content">
  <p>Using CamanJS is extremely simple, but also very flexible. All of the functionality is accessed by calling the <code>Caman()</code> function.</p>

  <h3 id="BasicUsage">Browser - Basic Usage</h3>

<p>One very important thing to note: due to browser security restrictions, CamanJS can only modify images that come from the same domain as the page in which it's loaded unless the image has a properly configured <a href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS policy</a> or you specify a proxy (more info below).</p>

<p>First, we'll need to include the appropriate Javascript files:</p>

Liquid error: Invalid command name

<h4>Loading an Image into a Canvas via URL</h4>

<p>This method assumes you already have a canvas element in the page, and you would like to load an image via URL into the canvas for editing with CamanJS. You can also give DOM objects instead of Strings if you prefer.</p>

Liquid error: Invalid command name

<h4>Replace an Image with a Canvas</h4>

<p>This performs an "in-place" initialization by replacing the given image with an identically sized canvas. If you don't modify the image at all, it will look identical to the user. This can also accept a DOM object instead of a CSS selector.</p>

Liquid error: Invalid command name

<h4>Loading a Canvas with Existing Image Data</h4>

<p>If you have a canvas you want to modify, but it already has image data on it, you can give the canvas as the first argument. This can accept a DOM object as well.</p>

Liquid error: Invalid command name

<h3>NodeJS</h3>

<h4>Installation</h4>

<p>We can easily install CamanJS using npm. In the base folder of your project, run:</p>

Liquid error: Invalid command name

<p>If you run into issues installing CamanJS, you may need to install/update some dependencies. You need:</p>

<ul class="TableList">
  <li>cairo</li>
  <li>libjpeg</li>
  <li>libpng</li>
</ul>

<div class="Clear"></div>

<h4>Basic Usage</h4>

<p>Initialization with NodeJS is extremely simple. You can either give Caman the path to an image on disk, or an already initialized File object.</p>

<p>Once you are done modifying the image, you can save the modified image to disk as well.</p>

Liquid error: Invalid command name
  <div class="SectionBreak"></div>

  <h3 id="AdvancedUsage">Advanced Usage</h3>
<p>Once you've gotten the CamanJS basics down, there are some more advanced techniques for you to explore.</p>

<h4>Layers</h4>
<p>CamanJS has a powerful layering system built-in that gives you even more editing power. Layers in CamanJS use a slightly different paradigm than those in editing applications like Photoshop. Layers can be nested, but they always apply effects to their parents like a stack.</p>

<p>When layers are applied to their parents, it is done using a particular blending mode. The default is "normal".</p>

Liquid error: Invalid command name

<h4>Blenders</h4>
<p>As mentioned above in the Layers section, when a layer is applied to it's parent, it uses a blending function. The built-in blending functions are:</p>

<ul class="TableList Across5">
  <li>normal</li>
  <li>multiply</li>
  <li>screen</li>
  <li>overlay</li>
  <li>difference</li>
  <li>addition</li>
  <li>exclusion</li>
  <li>softLight</li>
  <li>lighten</li>
  <li>darken</li>
</ul>

<div class="Clear"></div>

<p>It is extremely easy to extend CamanJS with new blending functions as well. More info is available in the <a href="#Extending">Extending CamanJS</a> section.</p>

<h4>Cropping/Resizing</h4>

<p>CamanJS allows you to crop and resize canvases with ease. This can be done either at initialization time, or later on.

<p>Note that, at this time, resizing at initialization is the only part included in the core library. You will either have to use the full version of CamanJS or include the size plugin manually if you want to crop or resize later.</p>

<h5>Resize at Initialization</h5>
<p>Resizing at initialization is handled by the data attributes camanwidth and camanheight. Specifying one or both will resize the image when it is applied to the canvas. The image will be stretched if the given size has a different width:height ratio than the original.</p>
Liquid error: Invalid command name

<h5>Resize via Plugin</h5>
<p>Resizing is provided as a CamanJS plugin. You must specify at least width or height. Changing the width:height ratio will stretch the image.</p>
Liquid error: Invalid command name

<h5>Crop via Plugin</h5>
<p>Cropping is also provided as a CamanJS plugin. You must specify at least the new width and height. You can optionally also specity the coordinates of the top left corner where the cropping should start.</p>
Liquid error: Invalid command name

<h4>Events</h4>

<p>CamanJS has an event system that lets you execute callbacks when specific actions occur. You can listen to events from all CamanJS instances on a page, or specific individual instances. The available events are:</p>

<ul class="TableList Across3">
  <li>processStart</li>
  <li>processComplete</li>
  <li>renderFinished</li>
  <li>blockStarted</li>
  <li>blockFinished</li>
</ul>

<div class="Clear"></div>

<p><code>processStart</code> and <code>processComplete</code> are triggered when a single filter starts and finishes rendering. When all filters are finished and the modification is complete, <code>renderFinished</code> is triggered. The renderer in CamanJS splits the image into blocks, so when a single block starts and finishes rendering, <code>blockStarted</code> and <code>blockFinished</code> are triggered. These are also useful for tracking render progress for larger images.</p>

Liquid error: Invalid command name
  <div class="SectionBreak"></div>

  <h3 id="BuiltIn">Built-In Functionality</h3>

<p>CamanJS has a wealth of built-in functionality from basic image filters to color conversion utility functions, and much more.</p>
<p>All of these filters are included with CamanJS in the core library.</p>

<h4>Brightness</h4>
<p>Simple brightness adjustment.</p>
<p>Range is -100 to 100. Values < 0 will darken while > 0 will brighten.</p>
Liquid error: Invalid command name

<h4>Channels</h4>
<p>Lets you modify the intensity of the Red, Green, and Blue color channels individually.</p>
<p>Must be given an argument with at least one channel to adjust. Adjustment values are from -100 to 100.</p>
Liquid error: Invalid command name

<h4>Clip</h4>
<p>Clips the color values when they fall outside of the given range.</p>
<p>Range is from 0 to 100.</p>
Liquid error: Invalid command name

<h4>Colorize</h4>
<p>Uniformly shifts the colors in an image towards the given color.</p>
<p>The adjustment range is from 0 to 100. The higher the value, the closer the colors in the image shift towards the given adjustment color. This filter is polymorphic and can take two different sets of arguments, which are shown below:</p>
Liquid error: Invalid command name

<h4>Contrast</h4>
<p>Increases or decreases the color contrast of the image.</p>
<p>Range is -100 to 100. Values < 0 will decrease contrast while values > 0 will increase contrast. Note: the contrast adjustment values are a bit sensitive. While unrestricted, sane adjustment values are usually around 5-10.</p>
Liquid error: Invalid command name

<h4>Curves</h4>
<img class="Right" style="width:300px;" src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Bezier_curve.svg/800px-Bezier_curve.svg.png">
<p>Adjusts the color values of an image based on a given bezier curve. If you're familiar with the Curves functionality in Photoshop, this works in a very similar fashion.</p>
<p>Arguments: curves(channel(s), start point, 1st control point, 2nd control point, end point)</p>
<p>The first argument represents the channels you wish to modify with the filter. It can be an array of channels or a string (for a single channel).</p>
<p>The rest of the arguments are 2-element arrays that represent point coordinates. They are specified in the same order as shown in this image to the right. The coordinates are in the range of 0 to 255 for both X and Y values.</p>
<p>The x-axis represents the input value for a single channel, while the y-axis represents the output value.</p>
Liquid error: Invalid command name

<h4>Exposure</h4>
<p>Simple exposure adjustment. Behind the scenes, this filter actually uses the Curves filter.</p>
<p>Range is -100 to 100. Values < 0 will decrease exposure while values > 0 will increase exposure.</p>
Liquid error: Invalid command name

<h4>Fill Color</h4>
<p>Fills the canvas with a single solid color. Useful when used with layers.</p>
<p>Can take either separate R, G, and B values as arguments, or a single hex color value.</p>
Liquid error: Invalid command name

<h4>Gamma</h4>
<p>Lets you adjust the gamma of the image.</p>
<p>Range is from 0 to infinity, although sane values are from 0 to 4 or 5. Values between 0 and 1 will lessen the contrast while values greater than 1 will increase it.</p>
<p>If you are unsure of what gamma really does, I recommend reading this <a href="http://en.wikipedia.org/wiki/Gamma_correction">Wikipedia article</a>.</p>
Liquid error: Invalid command name

<h4>Greyscale</h4>
<p>Converts the image to greyscale. This is the preferred method for converting to greyscale, as opposed to using the saturation filter.</p>
<p>This filter does not take any arguments.</p>
Liquid error: Invalid command name

<h4>Hue</h4>
<p>Adjusts the hue of the image. It can be used to shift the colors in an image in a uniform fashion. If you are unfamiliar with Hue, I recommend reading this <a href="http://en.wikipedia.org/wiki/Hue">Wikipedia article</a>.</p>
<p>Range is 0 to 100.</p>
<p>Sometimes, Hue is expressed in the range of 0 to 360. If that's the terminology you're used to, think of 0 to 100 representing the percentage of Hue shift in the 0 to 360 range.</p>
Liquid error: Invalid command name

<h4>Invert</h4>
<p>Inverts all colors in the image by subtracting each color channel value from 255.</p>
<p>This filter does not take any arguments.</p>
Liquid error: Invalid command name

<h4>Noise</h4>
<p>Applies an adjustable amount of noise to the image.</p>
<p>Range is from 0 to infinity. The higher the value, the more noise is applied.</p>
Liquid error: Invalid command name

<h4>Saturation</h4>
<p>Adjusts the color saturation of the image. If you want to completely desaturate the image, using the greyscale filter is highly recommended because it will yield better results.</p>
<p>Range is -100 to 100. Values < 0 will desaturate the image while values > 0 will saturate it.</p>
Liquid error: Invalid command name

<h4>Sepia</h4>
<p>Applies an adjustable sepia effect to the image.</p>
<p>Range is from 0 to 100. The larger the value, the stronger the sepia effect.</p>
Liquid error: Invalid command name

<h4>Vibrance</h4>
<p>Similar to saturation, but adjusts the saturation levels in a slightly smarter, more subtle way. Vibrance will boost colors that are less saturated more and boost already saturated colors less, while saturation boosts all colors by the same level.</p>
<p>Range is -100 to 100. Values < 0 will desaturate the image while values > 0 will saturate it.</p>
<p>If you want to completely desaturate the image, using the greyscale filter is highly recommended because it will yield better results.</p>
Liquid error: Invalid command name
  <div class="SectionBreak"></div>

  <h3 id="Extending">Extending CamanJS</h3>
<p>There are multiple ways to extend the core functionality of CamanJS, all of which are outlined below.</p>

<h4>Pixel-wise Filters</h4>
<p>Most of CamanJS is made up of pixel-wise filters. They get their name from the fact that they operate one pixel at a time. The filter function is given the RGB values of a single pixel, and the function returns the updated values.</p>
<p>The most important thing to understand with CamanJS filters is what is executed immediately, and what is executed at render time. All filters must call the <code>process()</code> function. Everything inside this function is executed at render time only, and the function is given the RGB values as its only argument.</p>

<p>Here is how the posterize filter is implemented:</p>

Liquid error: Invalid command name

<p>These filters also have access to a special object that is aware of the current location of the pixel given to the process function. This object exposes many helpful functions that allow you to not only get the location, but also get/set the values of other pixels in the image. All of it's functionality is shown below:</p>

Liquid error: Invalid command name

<h4>Kernel Manipulations</h4>
<p>Not everything can be done one pixel at a time. Another way to modify images is by using a convolution kernel. This is simply a matrix that describes how to modify a certain pixel based on the ones around it. The <a href="http://gimp.open-source-solution.org/manual/plug-in-convmatrix.html">GIMP documentation</a> does a great job at explaining this.</p>

<p>In CamanJS, kernels are defined by 1-dimensional arrays. The divisor and bias are automatically calculated for you, but you can manually specify them after the convolution matrix if needed.</p>

Liquid error: Invalid command name

<h4>Advanced Plugins</h4>
<p>If what you want to do doesn't fit into the workflow of pixelwise plugins or kernel manipulations, then you can also get full access to the canvas data inside of CamanJS using plugins.</p>

<p>Some examples of plugins include the super-fast Stack Blur algorithm and cropping/resizing. Notice that you also have to create a filter function for plugins. Here's how cropping works:</p>

Liquid error: Invalid command name

<h4>Blenders</h4>
<p>You can add new blenders that control how layers are applied to their parent layers. Here's how the multiply blender would be implemented:</p>

Liquid error: Invalid command name

<p>The two arguments to the blending function are the RGB values for the pixel in the current layer and the corresponding pixel in the parent layer, respectively. The blending function needs to return a new RGB object that will be the pixel's new color.</p>
</div>
</body>
</html>